{% extends "admin/base.html" %}

{% block title %}Edit DTR{% endblock %}

{% block content %}
<div class="section active">
  <div class="card">
    <div class="card-title">Edit Daily Time Record</div>
    
    <div style="margin-bottom: 20px;">
      <p><strong>Employee:</strong> {{ record.full_name }} ({{ record.employee_code }})</p>
    </div>

    <form method="POST" action="{{ url_for('admin.edit_dtr', attendance_id=record.attendance_id) }}">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
        <div>
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">Date:</label>
          <input type="date" name="date" value="{{ record.date }}" required 
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
        </div>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
        <div>
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">Morning Time In:</label>
          <input type="text" name="morning_in" value="{{ record.morning_in or '' }}" 
                 placeholder="08:00 AM" 
                 pattern="[0-9]{1,2}:[0-9]{2} (AM|PM)"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
          <small style="color: #6b7280; font-size: 12px;">Format: HH:MM AM/PM (e.g., 08:00 AM)</small>
        </div>

        <div>
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">Lunch Out:</label>
          <input type="text" name="lunch_out" value="{{ record.lunch_out or '' }}" 
                 placeholder="12:00 PM"
                 pattern="[0-9]{1,2}:[0-9]{2} (AM|PM)"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
          <small style="color: #6b7280; font-size: 12px;">Format: HH:MM AM/PM (e.g., 12:00 PM)</small>
        </div>

        <div>
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">Afternoon Time In:</label>
          <input type="text" name="afternoon_in" value="{{ record.afternoon_in or '' }}" 
                 placeholder="01:00 PM"
                 pattern="[0-9]{1,2}:[0-9]{2} (AM|PM)"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
          <small style="color: #6b7280; font-size: 12px;">Format: HH:MM AM/PM (e.g., 01:00 PM)</small>
        </div>

        <div>
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">Time Out:</label>
          <input type="text" name="time_out" value="{{ record.time_out or '' }}" 
                 placeholder="05:00 PM"
                 pattern="[0-9]{1,2}:[0-9]{2} (AM|PM)"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
          <small style="color: #6b7280; font-size: 12px;">Format: HH:MM AM/PM (e.g., 05:00 PM)</small>
        </div>
      </div>

      <div style="display: flex; gap: 10px; margin-top: 30px;">
        <button type="submit" 
                style="padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
          üíæ Save Changes
        </button>
        <a href="{{ url_for('admin.attendance', date=record.date) }}" 
           style="padding: 12px 24px; background: #6b7280; color: white; text-decoration: none; border-radius: 6px; display: inline-block; font-weight: 500;">
          ‚Üê Cancel
        </a>
      </div>
    </form>

    {% if error %}
    <div style="margin-top: 20px; padding: 12px; background-color: #fee2e2; color: #991b1b; border-radius: 6px;">
      ‚úó {{ error }}
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
