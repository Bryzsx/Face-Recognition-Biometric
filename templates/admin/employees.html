{% extends "admin/base.html" %}

{% block title %}All Employees{% endblock %}

{% block content %}
<div class="section active">
  <div class="card">
    <div class="card-title" style="display: flex; justify-content: space-between; align-items: center;">
      <span>All Employees</span>
      {% if employees %}
      <div style="display: flex; gap: 8px;">
        <a href="{{ url_for('admin.export_employees', format='csv') }}{% if search_query %}?search={{ search_query }}{% endif %}" 
           class="btn-export" 
           style="padding: 8px 16px; background: #10b981; color: white; text-decoration: none; border-radius: 6px; font-size: 13px; display: inline-flex; align-items: center; gap: 5px;">
          ðŸ“„ CSV
        </a>
        <a href="{{ url_for('admin.export_employees', format='excel') }}{% if search_query %}?search={{ search_query }}{% endif %}" 
           class="btn-export" 
           style="padding: 8px 16px; background: #059669; color: white; text-decoration: none; border-radius: 6px; font-size: 13px; display: inline-flex; align-items: center; gap: 5px;">
          ðŸ“Š Excel
        </a>
        <a href="{{ url_for('admin.export_employees', format='pdf') }}{% if search_query %}?search={{ search_query }}{% endif %}" 
           class="btn-export" 
           style="padding: 8px 16px; background: #dc2626; color: white; text-decoration: none; border-radius: 6px; font-size: 13px; display: inline-flex; align-items: center; gap: 5px;">
          ðŸ“‘ PDF
        </a>
      </div>
      {% endif %}
    </div>
    
    <!-- Search Bar -->
    <div class="search">
      <form method="GET" action="{{ url_for('admin.employees') }}" style="display: flex; gap: 10px; align-items: center;">
        <input type="text" 
               name="search" 
               placeholder="Search employee..." 
               value="{{ search_query or '' }}" 
               style="flex: 1;">
        <button type="submit">Search</button>
        {% if search_query %}
        <a href="{{ url_for('admin.employees') }}" class="btn-secondary" style="padding: 12px 20px; text-decoration: none; display: inline-block; white-space: nowrap;">Clear</a>
        {% endif %}
      </form>
    </div>

    <!-- Employees Table -->
    {% if employees %}
    <table class="table" style="margin-top: 20px;">
      <thead>
        <tr>
          <th>Name</th>
          <th>Employee ID</th>
          <th>Department</th>
          <th>Position</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for emp in employees %}
        <tr>
          <td>
            <a href="{{ url_for('admin.employee_info') }}?id={{ emp.id }}" style="color: #667eea; text-decoration: none; font-weight: 500;">
              {{ emp.full_name or 'N/A' }}
            </a>
          </td>
          <td>{{ emp.employee_code or 'N/A' }}</td>
          <td>{{ emp.department or 'N/A' }}</td>
          <td>{{ emp.position or 'N/A' }}</td>
          <td>
            <span class="badge {% if emp.status == 'Active' %}active-b{% else %}present{% endif %}">
              {{ emp.status or 'Active' }}
            </span>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p style="margin-top: 20px; color: #6b7280; text-align: center; padding: 40px;">
      {% if search_query %}
        No employees found matching "{{ search_query }}"
      {% else %}
        No employees registered yet.
      {% endif %}
    </p>
    {% endif %}
  </div>
</div>
{% endblock %}
